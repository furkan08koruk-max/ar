<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        // QR Kod Kaybolduğunda Nesneyi Ekranda Tutan Script
        AFRAME.registerComponent('keep-on-screen', {
            init: function () {
                var marker = this.el;
                var model = document.querySelector('#anitkabir-model');
                
                marker.addEventListener('markerFound', function() {
                    // QR bulununca modeli görünür yap ve marker içine al
                    model.setAttribute('visible', true);
                });

                marker.addEventListener('markerLost', function() {
                    // QR kaybolduğunda modeli silme! 
                    // Sadece marker içinden çıkarıp dünyaya (camera önüne) sabitleyebiliriz 
                    // Ama en stabil yol görünür bırakmaya devam etmektir.
                    console.log("QR Kayboldu ama model duruyor...");
                });
            }
        });
    </script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
        
        <a-marker type="pattern" url="qr/pattern-ar_projesi.patt" keep-on-screen>
            
            <a-entity id="anitkabir-model" position="0 0 0" scale="0.25 0.25 0.25" visible="false">
                
                <a-box color="#8c8c8c" scale="5 0.1 4" position="0 0.05 0"></a-box>
                
                <a-box color="#E0D8B0" scale="3.8 1.6 2.4" position="0 1 0"></a-box>

                <a-entity position="0 1 1.3">
                    <a-cylinder color="#D1C9A3" height="1.6" radius="0.08" position="-1.5 0 0"></a-cylinder>
                    <a-cylinder color="#D1C9A3" height="1.6" radius="0.08" position="-0.5 0 0"></a-cylinder>
                    <a-cylinder color="#D1C9A3" height="1.6" radius="0.08" position="0.5 0 0"></a-cylinder>
                    <a-cylinder color="#D1C9A3" height="1.6" radius="0.08" position="1.5 0 0"></a-cylinder>
                </a-entity>

                <a-text value="FURKAN KORUK" position="0 2.5 0" align="center" color="#00f2ff" width="6"></a-text>

            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
